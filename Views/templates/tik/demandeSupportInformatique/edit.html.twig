{% extends 'baseTemplate.html.twig' %}

{% block title %}Créer une Demande de Support Informatique
{% endblock %}
{% block stylesheets %}
	<link href="{{ App.base_path }}/Views/css/new.css?v=2025.08.29.15.05" rel="stylesheet"/>
	<link href="{{ App.base_path }}/Views/css/tik/supportInfo.css?v=2025.08.29.15.05" rel="stylesheet">
{% endblock %}

{% import "macroForm.html.twig" as macroForm %}

{% block content %}
	<div class=" container">

		<div class="card">
			<div class="card-body">
				<div class="dropzone" id="dropzone">
					<div class="container">
						<div class="row">
							<div class="col-12 col-md-11">
								<h3 class="perso-titre">
									Formulaire de modification de support informatique
								</h3>
							</div>

							<div class=" col-12 col-md-1">
								<a href="{{ path("liste_tik_index")}}" class="tablinks p-2 btn btn-outline-warning" style="text-decoration: none;color:black">Retour</a>
							</div>
						</div>
						{{ form_start(form, { 'attr': { 'enctype': 'multipart/form-data' } }) }}

						{{ form_errors(form)}}

						<div class="row">

							<div class="col-12 col-md-6">

								{{ form_row(form.objetDemande)}}
								{{ form_row(form.detailDemande)}}

								<div class="row">
									<div class="col-12 col-md-6">
										{{ form_row(form.categorie)}}
										{{ form_row(form.dateFinSouhaitee)}}
									</div>
									<div class="col-12 col-md-6">
										{{ form_row(form.parcInformatique)}}
										{{ form_row(form.codeSociete)}}
									</div>
								</div>

							</div>

							<div class="col-12 col-md-6">
								{{ macroForm.sousTitre('Agence et Service', {class: 'sousTitre'})}}
								<div class="row">
									<div class="col-12 col-md-6 mt-2">Débiteur</div>
									<div class="col-12 col-md-6 mt-2">Emetteur</div>
								</div>

								<div class="row">
									<div class="col-12 col-md-6">
										{{ form_row(form.agence)}}
										{{ form_row(form.service)}}

									</div>
									<div class="col-12 col-md-6">
										{{ form_row(form.agenceEmetteur)}}
										{{ form_row(form.serviceEmetteur)}}
									</div>

								</div>
								{{ macroForm.sousTitre('Pièces Jointes', {class: 'sousTitre'})}}


								<div class="file-upload-wrapper">
									<label for="file-input">
										{{ form_widget(form.fileNames, {'attr': {'class': 'file-input', 'id': 'file-input', 'multiple': true, 'style': 'display: none'}}) }}
									</label>
									<ul id="file-list" class="file-list">
										{% for fichier in fichiers %}
											<li class="file-item" data-id="{{ fichier.id }}">
												<span class="file-name">{{ fichier.name }}</span>
												<span class="file-size">({{ fichier.size}}
													Ko)</span>
												<span class="remove-file" data-id="{{ fichier.id }}">×</span>
											</li>
										{% endfor %}
									</ul>

									{{ form_errors(form.fileNames) }}
								</div>
							</div>


						</div>
					</div>
					<div class="d-flex justify-content-end">
						<i class="fas fa-paperclip" id="paperclip-icon" data-bs-toggle="tooltip" title="Ajouter des fichiers"></i>
						<button type="submit" class="btn bouton" id="formDit" onclick="return confirm('Veuillez vérifier attentivement avant d\'envoyer.')">
							<i class="fas fa-save"></i>
							Enregistrer
						</button>
					</div>

					{{ form_end(form) }}
				</div>

			</div>
		</div>

	</div>
{% endblock %}

{% block javascript %}
	<script src="{{ App.base_path }}/Views/js/tik/tikSupport.js" type="module"></script>
	<script>// document.addEventListener("DOMContentLoaded", function () {
// CKEDITOR.replace('demande_support_informatique[detailDemande]', {
// language: 'fr',
// toolbar: 'basic', // Personnaliser la barre d'outils
// });
// });
</script>{% endblock %}
