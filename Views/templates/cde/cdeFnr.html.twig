{% extends "baseTemplate.html.twig" %}

{% block stylesheets %}
	<link href="{{ App.base_path }}/Views/css/new.css?v=2025.10.22.08.00" rel="stylesheet"/>
	<link rel="stylesheet" href="{{ App.base_path }}/Views/css/list.css?v=2025.10.22.08.00">
	<link href="{{ App.base_path }}/Views/css/dit/ditInsertionOr.css?v=2025.10.22.08.00" rel="stylesheet"/>
	<link rel="stylesheet" href="{{ App.base_path }}/Views/css/cde/cdeFnr.css?v=2025.10.22.08.00">
{% endblock %}

{% block content %}
	<div class=" container">
		<div class="card">
			<div class="card-body">
				<div class="row">
					<div class="col-12 col-md-11">
						<h3 class="perso-titre">
							Soumission Commande Fournisseur
						</h3>
					</div>
					{% include "/partials/_notification.html.twig" %}
				</div>
				{{ form_start(form, { 'attr': { 'id': 'myForm', 'enctype': 'multipart/form-data'} }) }}
				{{ form_errors(form)}}

				<div class="row">

					<div class="col-12 col-md-3">
						<p>Veuillez insérer
							<strong>la commande à valider *</strong>
						</p>
						{% include '/partials/_dropZoneFile.html.twig' with {'id': '1', 'form': form, 'fieldName': 'pieceJoint01'} %}
					</div>
					<div class="col-12 col-md-3">
						<p>Vous pouvez insérer
							<strong>les autres fichiers ici</strong>
						</p>
						{% include '/partials/_dropZoneFileMultiple.html.twig' with {'id': '2', 'form': form, 'fieldName': 'pieceJoint02'} %}
					</div>
					<div class="d-flex justify-content-end">
						<button type="submit" class="btn bouton mt-2" id="bouton-cde-fnr" data-confirmation data-form="#myForm">
							<i class="fas fa-save"></i>
							Enregistrer
						</button>
					</div>
				</div>
				{{ form_end(form) }}

			</div>
		</div>
		<div class="row">
			<div
				id="file-viewer" class="mt-3">
				<!-- Onglets -->
				<ul class="nav nav-tabs" id="pdfTabs" role="tablist">
					<li class="nav-item" role="presentation">
						<button class="nav-link active" id="tab1-tab" data-bs-toggle="tab" data-bs-target="#tab1" type="button" role="tab">
							Commande à valider
						</button>
					</li>
					<li class="nav-item" role="presentation">
						<button class="nav-link" id="tab2-tab" data-bs-toggle="tab" data-bs-target="#tab2" type="button" role="tab">
							Les autres fichiers
						</button>
					</li>
				</ul>

				<!-- Contenu des onglets -->
				<div
					class="tab-content border border-top-0 p-3" id="pdfTabContent">
					<!-- Tab 1 -->
					<div class="tab-pane fade show active" id="tab1" role="tabpanel" aria-labelledby="tab1-tab">
						<div id="file-list-1" class="mt-3"></div>
					</div>

					<!-- Tab 2 -->
					<div class="tab-pane fade" id="tab2" role="tabpanel" aria-labelledby="tab2-tab">
						<div id="file-list-2" class="mt-3"></div>
					</div>
				</div>
			</div>
		</div>
	</div>
{% endblock %}

{% block javascript %}
	<script type="module" src="{{ App.base_path }}/Views/js/cde/cdeFnrSoumisAValidation.js?v=2025.10.22.08.00" type="module"></script>
{% endblock %}
