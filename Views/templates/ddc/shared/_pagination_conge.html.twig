<div class="d-flex justify-content-evenly mt-3">
	<div>
		<i class="fas fa-check text-success"></i>
		Validé
	</div>
	<div>
		<i class="fas fa-hourglass-half text-warning"></i>
		En cours de validation
	</div>
	<div>
		<i class="fas fa-ban text-danger"></i>
		Annulé / Refusé
	</div>
</div>
<div class="d-flex justify-content-between">
	<div>
		{% if viewMode == 'calendar' %}
			<form method="GET" action="{{ path('export_conge_excel') }}" style="display:inline;" class="excel-form" id="excel-export-form-calendar">
				<input type="hidden" name="format" value="table">

				{# Gestion du filtre "Groupe Direction" #}
				{% set groupeDirectionFromRequest = app.request.query.get('groupeDirection') %}
				{% set groupeDirectionFromNested = app.request.query.get('demande_conge', {})['groupeDirection'] %}

				{% if groupeDirectionFromRequest is not null %}
					<input type="hidden" name="groupeDirection" value="{{ groupeDirectionFromRequest }}">
				{% elseif groupeDirectionFromNested is not null %}
					<input type="hidden" name="demande_conge[groupeDirection]" value="{{ groupeDirectionFromNested }}">
				{% endif %}

				{% for key, value in app.request.query.all %}
					{% if key != 'format' %}
						{% if key starts with 'demande_conge[' %}
							{% if key != 'demande_conge[groupeDirection]' %}
								{% if value is iterable %}
									{% for subkey, subvalue in value %}
										<input type="hidden" name="demande_conge[{{ subkey }}]" value="{{ subvalue }}">
									{% endfor %}
								{% else %}
									<input type="hidden" name="{{ key }}" value="{{ value }}">
								{% endif %}
							{% endif %}
						{% else %}
							<input type="hidden" name="{{ key }}" value="{{ value }}">
						{% endif %}
					{% endif %}
				{% endfor %}

				<button type="submit" class="btn btn-sm bg-success text-white my-3 fw-bold excel-button">
					<i class="fas fa-table"></i>
					<span class="btn-text">Excel calendrier</span>
				</button>
			</form>
			<a href="{{ path('conge_liste') }}" class="btn btn-sm bg-warning text-white"><i class="fas fa-list"></i> Liste</a>
		{% else %}
			<form method="GET" action="{{ path('export_conge_excel') }}" style="display:inline;" class="excel-form" id="excel-export-form-list">
				<input type="hidden" name="format" value="list">

				{# Gestion du filtre "Groupe Direction" #}
				{% set groupeDirectionFromRequest = app.request.query.get('groupeDirection') %}
				{% set groupeDirectionFromNested = app.request.query.get('demande_conge', {})['groupeDirection'] %}

				{% if groupeDirectionFromRequest is not null %}
					<input type="hidden" name="groupeDirection" value="{{ groupeDirectionFromRequest }}">
				{% elseif groupeDirectionFromNested is not null %}
					<input type="hidden" name="demande_conge[groupeDirection]" value="{{ groupeDirectionFromNested }}">
				{% endif %}

				{% for key, value in app.request.query.all %}
					{% if key != 'format' %}
						{% if key starts with 'demande_conge[' %}
							{% if key != 'demande_conge[groupeDirection]' %}
								{% if value is iterable %}
									{% for subkey, subvalue in value %}
										<input type="hidden" name="demande_conge[{{ subkey }}]" value="{{ subvalue }}">
									{% endfor %}
								{% else %}
									<input type="hidden" name="{{ key }}" value="{{ value }}">
								{% endif %}
							{% endif %}
						{% else %}
							<input type="hidden" name="{{ key }}" value="{{ value }}">
						{% endif %}
					{% endif %}
				{% endfor %}

				<button type="submit" class="btn btn-sm bg-success text-white my-3 fw-bold excel-button">
					<i class="fas fa-table"></i>
					<span class="btn-text">Excel liste</span>
				</button>
			</form>
			<a href="{{ path('conge_calendrier') }}" class="btn btn-sm bg-info text-white my-3 fw-bold"> <i class="fas fa-calendar"></i>
			Calendrier</a>
		{% endif %}
	</div>
	<div>
		<p class="fw-bold my-3" id="nombreResultat">{{resultat}}
			Résultats</p>
	</div>
	<div>
		<p class="fw-bold my-3" id="nombreResultat">{{currentPage ~' / '~ (lastPage)}}
			pages</p>
	</div>
	<div class="navigation">
		{% set queryParams = criteria  %}

		{% if currentPage > 1 %}
			<a class="btn btn-dark my-3" href="{{ path('conge_liste', queryParams|merge({'page': currentPage - 1})) }}">
				<i class="fas fa-angle-left text-warning"></i>
			</a>
		{% endif %}


		{% if currentPage < lastPage %}
			<a class="btn btn-dark" href="{{ path('conge_liste', queryParams|merge({'page': currentPage + 1})) }}">
				<i class="fas fa-angle-right text-warning"></i>
			</a>
		{% endif %}
	</div>
</div>