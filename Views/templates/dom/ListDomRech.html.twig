{% extends "baseTemplate.html.twig" %}

{% block stylesheets %}
	<link rel="stylesheet" href="/Hffintranet/Views/css/ListDomRech.css">
{% endblock %}

{% block title %}
	<title>Liste d'Ordre de Mission</title>
{% endblock %}

{% import "macroForm.html.twig" as form %}


{% block content %}

	<!-- DEBUT recherche -->

	<div class="container">
		<div class="row">
			<div class="col">
				<h2>
					Liste de la demande d'ordre de mission
				</h2>
			</div>
		</div>

		<form action="" method="get">
			<div class="row">
				{{form.select_1('Description', 'Statut', statut,{endpoint: '12', class: ' col-md-6 col-xl-3', default: 'true', valueDefault:'Choisir un statut'})}}

				{{form.select_1('Sous_type_document', 'Sous Type', sousTypeDoc ,{endpoint: '12', class: ' col-md-6 col-xl-3', default: 'true', valueDefault:'Choisir un type'})}}

				<div class="col-12 col-md-6  col-xl-3">
					<div class="input-group mb-2">
						<span class="input-group-text">Matricule</span>
						<input type="search" name="Matricule" id="matricule" class="form-control">
					</div>
				</div>
				<div class="col-12 col-md-6 col-xl-3">
					<div class="input-group mb-2">
						<span class="input-group-text">N° DOM</span>
						<input type="search" name="Numero_Ordre_Mission" id="numDom" class="form-control">
					</div>
				</div>
			</div>


			<div class="row">
				<small class="dateCreationMessage" id="dateCreationMessage"></small>
				<div class="col-12 col-md-6  ">
					<div class="input-group mb-2">
						<span class="input-group-text">Date de création (début)</span>
						<input type="date" name="dateDemandeDebut" id="dateCreationDebut" class="form-control">
					</div>
				</div>
				<div class="col-12 col-md-6  ">
					<div class="input-group mb-2">
						<span class="input-group-text">Date de Mission (début)</span>
						<input type="date" name="dateMissionDebut" id="dateDebutDebut" class="form-control">
					</div>
				</div>

			</div>

			<div class="row">


				<div class="col-12 col-md-6 col-lg-6 ">
					<div class="input-group mb-2">
						<span class="input-group-text">Date de création (fin)</span>
						<input type="date" name="dateDemandeFin" id="dateCreationFin" class="form-control">
					</div>
				</div>
				<div class="col-12 col-md-6 col-lg-6 ">
					<div class="input-group mb-2">
						<span class="input-group-text">Date de Mission (fin)</span>
						<input type="date" name="dateMissionFin" id="dateDebutFin" class="form-control">
					</div>
				</div>

			</div>

			<div class="row">
				<small class="dateCreationMessage" id="dateCreationMessage"></small>
			</div>


			<!-- FIN recherche -->


			<!-- DEBUT bouton -->
			<div class="row justify-content-center">
				<div class="col-xxl-4">
					<input type="submit" id="recherche" class="btn  fw-bold" style="background-color: #FBBB01 ;" value="Rechercher">
					<input type="reset" id="reset" class="btn btn-dark text-white" value="Effacer">
					<input type="submit" name="exportExcel" id="export" class="btn btn-success" value="Export Excel">
				</div>
			</div>
			<!-- FIN bouton -->
		</form>

		<!-- DEBUT affichage de text no resultat -->
		<div id="noResult"></div>
		<!-- FIN -->


		<!-- DEBUT nombre  -->
		<div class=" row ">
			<div class="col-12 col-md-6 col-lg-4">
				<select class="bg-dark text-white" name="nombreLigne" id="nombreLigne">
					<option value="15">15</option>
					<option value="100">100</option>
				</select>
			</div>
			<div class="col-12 col-md-6 col-lg-4">
				<p class="fw-bold" id="nombreResultat">{{resultat}}
					Resultats</p>
			</div>
			<div class="col-12 col-md-6 col-lg-4">

				<a href="{{path("domList_ShowListDomRecherche")}}">précédent</a>
				<a href="{{path("domList_ShowListDomRecherche")}}">suivant</a>

			</div>


		</div>
		<!-- FIN nombre-->

	</div>
	<!-- DEBUT tableau -->
	<div class="Contenue table-plein-ecran">
		<div>
			<table class="table  table-striped table-shadow shadow  rounded ">
				<thead class="table-dark">
					<tr>
						<th style="text-align: center;">#</th>
						<th>Statut</th>
						<th>Sous type</th>
						<th>N° DOM</th>
						<th>Date de demande</th>
						<th>Motif de déplacement</th>
						<th style="text-align: center;">Matricule</th>
						<th>Nom</th>
						<th>Prénoms</th>
						<th>Mode de paiement</th>
						<th>Agence - Service</th>
						<th>Date de début</th>
						<th>Date de fin</th>
						<th>Nbr jours</th>
						<th>Client</th>
						<th>Fiche</th>
						<th>Lieu d'intervention</th>
						<th>Num vehicule</th>
						<th>Total autres dépense</th>
						<th>Total général payer</th>
						<th>Devis</th>
					</tr>
				</thead>
				<tbody id="table-container">
					{% for item in dom %}
						<tr>
							<td>
								<div class="dropdown">
									<button class="btn btn-warning dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false" style="text-decoration: none; color: #000; font-weight: 600">
										Actions
									</button>
									<ul class="dropdown-menu" aria-labelledby="dropdownMenuButton" style="">
										<li>
											<a class="dropdown-item" href="{{path("domDuplication_duplificationForm", {numDom: item.Numero_Ordre_Mission, id: item.ID_Demande_Ordre_Mission, matricule: item.Matricule})}}">Dupliquer</a>
										</li>
									</ul>
								</div>
							</td>
							<td>{{item.Description}}</td>
							<td>{{item.Sous_type_document}}</td>
							<td>
								<a href="{{path("domDetail_detailDom", {numDom: item.Numero_Ordre_Mission, id: item.ID_Demande_Ordre_Mission })}}">{{item.Numero_Ordre_Mission}}</a>
							</td>
							<td style="text-align: center;">{{item.Date_Demande}}</td>
							<td>{{item.Motif_Deplacement}}</td>
							<td style="text-align: center;">{{item.Matricule}}</td>
							<td>{{item.Nom}}</td>
							<td>{{item.Prenom}}</td>
							<td>{{item.Mode_Paiement}}</td>
							<td>{{item.LibelleCodeAgence_Service}}</td>
							<td style="text-align: center;">{{item.Date_Debut}}</td>
							<td style="text-align: center;">{{item.Date_Fin}}</td>
							<td style="text-align: center;">{{item.Nombre_Jour}}</td>
							<td>{{item.Client}}</td>
							<td>{{item.Fiche}}</td>
							<td>{{item.Lieu_Intervention}}</td>
							<td>{{item.NumVehicule}}</td>
							<td style="text-align: right;">{{item.Total_Autres_Depenses}}</td>
							<td style="text-align: right;">{{item.Total_General_Payer}}</td>
							<td>{{item.Devis}}</td>

						</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
	</div>
	<!-- FIN tableau -->
	<div class="container ">
		<div id="pagination-wrapper"></div>
	</div>
	<!-- DEBUT Pagination -->
	<nav class="col-9">
		<ul class="pagination justify-content-end"></ul>
	</nav>
	<!-- FIN Pagination -->


{% endblock %}

{% block javascript %}
	<script script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"></script>
	{#  <script src="/Hffintranet/Views/js/dom/ListDomRech.js"></script> #}
{% endblock %}
