{% extends "baseTemplate.html.twig" %}

{% block title %}
	Reporting IPS DA Réappro
{% endblock %}

{% block stylesheets %}
	<link rel="stylesheet" href="{{ App.base_path }}/Views/css/list.css?v=2025.09.15.08.00">
	<link rel="stylesheet" href="{{ App.base_path }}/Views/css/da/reappro/reporting_ips.css?v=2025.10.28.08.00">
{% endblock %}

{% block content %}
	<div class="container-fluid mt-6">
		<div class="sticky-header-titre">
			<div class="container">
				{% include "/partials/_notification.html.twig" %}
			</div>
		</div>

		<div style="max-height: 70vh; overflow-y: auto;">
			<table class="table table-sticky">
				<thead class="table-dark align-middle table-fixed">
					<tr>
						<th class="text-center">Agence débiteur</th>
						<th class="text-center">Serivce débiteur</th>
						<th class="text-center">Date</th>
						<th class="text-center">Facture</th>
						<th class="text-center">Référence Client</th>
						<th class="text-center">CST</th>
						<th class="text-center">Référence</th>
						<th class="text-center">Description</th>
						<th class="text-center">Qte</th>
						<th class="text-center">P.U</th>
						<th class="text-center">Montant</th>
					</tr>
				</thead>
				<tbody id="tableBody">
					{% for item in reporting_ips %}
						<tr>
							<td class="text-center">{{item.agence_debiteur}}</td>
							<td class="text-center">{{item.service_debiteur}}</td>
							<td class="text-center">{{item.date_commande|date('d/m/Y')}}</td>
							<td class="text-center">{{item.numero_facture}}</td>
							<td class="text-center">{{item.client}}</td>
							<td class="text-center">{{item.constructeur}}</td>
							<td class="text-center">{{item.reference_produit}}</td>
							<td class="text-start">{{item.designation_produit}}</td>
							<td class="text-center">{{item.qte_demande == 0 ? '-': item.qte_demande}}</td>
							<td class="text-end">{{item.prix_unitaire_reel|number_format(2, ',' ,'.')}}</td>
							<td class="text-end">{{item.montant|number_format(2, ',' ,'.')}}</td>
						</tr>
					{% endfor %}
				</tbody>
			</table>
			<div class="mt-3 mx-4 d-flex justify-content-end gap-4">

				<span class="fw-bold">Qte Totale :
				</span>
				<span class="fw-bold text-danger">{{ qte_totale }}
				</span>

				<span class="fw-bold">Montant Total :
				</span>
				<span class="fw-bold text-danger">{{ montant_total|number_format(2, ',' ,'.') }}
				</span>
			</div>
		</div>

	</div>


{% endblock %}
