{% extends "baseTemplate.html.twig" %}

{% block title %}
	Liste des Commandes Fournisseurs
{% endblock %}

{% block stylesheets %}
	<link rel="stylesheet" href="{{ App.base_path }}/Views/css/list.css?v=2025.10.22.08.00">
	<link rel="stylesheet" href="{{ App.base_path }}/Views/css/da/list.css?v=2025.10.22.08.00">
	<link rel="stylesheet" href="{{ App.base_path }}/Views/css/da/list-cde-frn.css?v=2025.10.22.08.00">
	<link rel="stylesheet" href="{{ App.base_path }}/Views/css/da/style.css?v=2025.10.22.08.00">
{% endblock %}

{% block overlay %}
	{% include "/shared/_overlay.html.twig" %}
{% endblock %}

{% block content %}
	<div class="container-fluid">
		<div class="sticky-header-titre">
			<div class="container">
				{% include "/partials/_notification.html.twig" %}
				{% include "/da/shared/cdeFrn/_formulaireRecherche.html.twig" %}
				{% include "/da/shared/cdeFrn/_pagination.html.twig" %}
			</div>
		</div>

		<table class="table table-sticky">
			<thead class="table-dark align-middle">
				<tr>
					<th class="text-center">N° DA</th>
					<th class="text-center">Type de demande</th>
					<th class="text-center">N° DIT</th>
					<th class="text-center">Niv. Urgence</th>
					<th class="text-center">N° OR</th>
					<th class="text-center">Date planning OR</th>
					<th class="text-center">N° Fournisseur</th>
					<th class="text-center">Fournisseur</th>
					<th class="text-center">N° Commande</th>
					<th class="text-center">Statut DA</th>
					<th class="text-center">Statut BC</th>
					<th class="text-center">Non dispo</th>
					<th class="text-center">Date fin souhaité</th>
					<th class="text-center">Réference</th>
					<th class="text-center">Désignation</th>
					<th class="text-center">Qté demandée</th>
					<th class="text-center">Qté en attente</th>
					<th class="text-center">Qté Dispo (Qté à livrer)</th>
					<th class="text-center">Qté livrée</th>
					<th class="text-center">Date livraison prévue</th>
					<th class="text-center">
						<div class="d-flex flex-row align-items-center">
							<span>Nbr Jour(s) dispo</span>
							<div class="{{ sortJoursClass ? '' : 'd-none' }}">
								<i class="{{ sortJoursClass }} fs-4 text-warning"></i>
							</div>
						</div>
					</th>
					<th class="text-center">Demandeur</th>
				</tr>
			</thead>
			<tbody id="tableBody" class="align-middle">
				{% for row in data %}
					<tr>
						<td class="text-center">
							<a href="{{ row.urlDetail }}" target="_blank">
								{{ row.numeroDemandeAppro }}
							</a>
						</td>
						<td class="text-center">{{ row.datype }}</td>
						<td class="text-center">{{ row.numeroDemandeDit }}</td>
						<td class="text-center">{{ row.niveauUrgence }}</td>
						<td class="text-center">{{ row.numeroOr }}</td>
						<td class="text-center">{{ row.datePlannigOr }}</td>
						<td class="text-center">{{ row.numeroFournisseur }}</td>
						<td class="text-center">{{ row.nomFournisseur }}</td>
						<td {% for attr, val in row.tdNumCdeAttributes %} {{ attr }}="{{ val }}" {% endfor %}>
							{{ row.numeroCde }}
						</td>
						<td class="text-center fw-bold {{ row.styleStatutDA }}">{{ row.statutDal }}</td>
						<td class="text-center fw-bold {{ row.styleStatutBC }}">{{ row.statutCde }}</td>
						<td class="text-center {{ row.styleClickableCell }}">
							{% if row.envoyeFrn %}
								<input {% for attr, val in row.tdCheckboxAttributes %} {{ attr }}="{{ val }}" {% endfor %}>
							{% endif %}
						</td>
						<td class="text-center {{ row.styleClickableCell }}">{{ row.dateFinSouhaite }}</td>
						<td class="text-center {{ row.styleClickableCell }}">{{ row.artRefp }}</td>
						<td class="text-start {{ row.styleClickableCell }}">{{ row.artDesi }}</td>
						<td class="text-center {{ row.styleClickableCell }}">{{ row.qteDem }}</td>
						<td class="text-center {{ row.styleClickableCell }}">{{ row.qteEnAttent }}</td>
						<td class="text-center {{ row.styleClickableCell }}">{{ row.qteDispo }}</td>
						<td class="text-center {{ row.styleClickableCell }}">{{ row.qteLivrer }}</td>
						<td class="text-center {{ row.styleClickableCell }}">{{ row.dateLivraisonPrevue }}</td>
						<td class="text-center {{ row.styleClickableCell }} {{ row.styleJoursDispo }}">{{ row.joursDispo }}</td>
						<td class="text-center {{ row.styleClickableCell }}">{{ row.demandeur}}</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>

	{% include "/partials/_pagination.html.twig" %}

	<!-- FIN tableau -->
	{% include "/da/shared/cdeFrn/_menuContextuel.html.twig" %}
	{% include "/dit/shared/_modalNiveauUrgence.html.twig" %}
	{% include "/da/shared/cdeFrn/_modalDateLivraison.html.twig" %}

{% endblock %}

{% block javascript %}
	<script src="{{ App.base_path }}/Views/js/utils/positionSticky.js?v=2025.10.22.08.00"></script>
	<script src="{{ App.base_path }}/Views/js/da/listeCdeFrn/listCdefrn.js?v=2025.10.22.08.00" type="module"></script>
	<script src="{{ App.base_path }}/Views/js/da/listeCdeFrn/daNonDispo.js?v=2025.10.22.08.00" type="module"></script>
{% endblock %}
